(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{260:function(e,t,n){e.exports=n(339)},271:function(e,t,n){},339:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(226),i=n.n(o),c=(n(267),n(268),n(269),n(270),n(271),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,379)).then(function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)})}),l=n(31),u=n(25),s=n(16),f=n(9),h=n(15),m=n(20),d=function e(t){Object(f.a)(this,e),Object.assign(this,t)},p=function e(t){Object(f.a)(this,e),this.id=void 0,this.title="",this.category="",this.description="",this.date=null,this.city="",this.venue="",t&&(this.id=t.id,this.title=t.title,this.category=t.category,this.description=t.description,this.date=t.date,this.city=t.city,this.venue=t.venue)},v=n(359),g=n(72),y=n(13),E=n(29),b=n(355),w=n(242),O=n(371),j=n(245),x=n(149),k=n(23),L=Object(k.a)(function(){var e=St().userStore,t=e.user,n=e.logout,r=e.isLoggedIn;return a.a.createElement(w.a,{inverted:!0,fixed:"top"},a.a.createElement(b.a,null,a.a.createElement(w.a.Item,{as:E.b,to:"/",header:!0},a.a.createElement("img",{src:"/assets/logo.png",style:{marginRight:"10px"}}),"Reactivities"),r&&a.a.createElement(a.a.Fragment,null,a.a.createElement(w.a.Item,{as:E.b,to:"/activities",name:"Activities"}),a.a.createElement(w.a.Item,{as:E.b,to:"/errors",name:"Errors"}),a.a.createElement(w.a.Item,{header:!0},a.a.createElement(O.a,{as:E.b,to:"/createActivity",positive:!0,content:"Create Activity"})),a.a.createElement(w.a.Item,{position:"right"},a.a.createElement(j.a,{src:null==t?"/assets/user.png":null==t.image?"/assets/user.png":t.image,avatar:!0,spaced:"right"}),a.a.createElement(x.a,{pointing:"top left",text:null==t?"":t.displayName},a.a.createElement(x.a.Menu,null,a.a.createElement(x.a.Item,{as:E.a,to:"/profiles/".concat(null==t?null:t.username),text:"My Profile",icon:"user"}),a.a.createElement(x.a.Item,{onClick:n,text:"Logout",icon:"power"})))))))}),S=n(212),C=n(375),A=n(357),P=n(36),T=n(12),F=n(361),N=n(183);function I(e){var t=Object(P.e)(e.name),n=Object(T.a)(t,2),r=n[0],o=n[1];return a.a.createElement(F.a.Field,{error:o.touched&&!!o.error},a.a.createElement("label",null,e.label),a.a.createElement("input",Object.assign({},r,e)),o.touched&&o.error?a.a.createElement(N.a,{basic:!0,color:"red"},o.error):null)}var _=n(38),G=Object(k.a)(function(){var e=St().userStore;return a.a.createElement(P.d,{initialValues:{email:"",password:"",error:null},onSubmit:function(t,n){var r=n.setErrors;return e.login(t).catch(function(e){return r({error:e.response.data})})},validationSchema:_.a({email:_.b().required(),password:_.b().required()})},function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.errors;return a.a.createElement(P.c,{className:"ui form",onSubmit:t,autoComplete:"off"},a.a.createElement(C.a,{as:"h2",content:"Login to Reactivities",color:"teal",textAlign:"center"}),a.a.createElement(I,{placeholder:"Email",name:"email"}),a.a.createElement(I,{placeholder:"Password",name:"password",type:"password"}),a.a.createElement(P.a,{name:"error",render:function(){return a.a.createElement(N.a,{style:{marginBottom:10},basic:!0,color:"red",content:r.error})}}),a.a.createElement(O.a,{loading:n,positive:!0,content:"Login",type:"submit",fluid:!0}))})}),M=n(369);function R(e){var t=e.errors;return a.a.createElement(M.a,{error:!0},t&&a.a.createElement(M.a.List,null,t.map(function(e,t){return a.a.createElement(M.a.Item,{key:t},e)})))}var D=Object(k.a)(function(){var e=St().userStore;return a.a.createElement(P.d,{initialValues:{diplayName:"",username:"",email:"",password:"",error:null},onSubmit:function(t,n){var r=n.setErrors;return e.register(t).catch(function(e){return r({error:e})})},validationSchema:_.a({displayName:_.b().required(),username:_.b().required(),email:_.b().required(),password:_.b().required()})},function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.errors,o=e.isValid,i=e.dirty;return a.a.createElement(P.c,{className:"ui form error",onSubmit:t,autoComplete:"off"},a.a.createElement(C.a,{as:"h2",content:"Sign up to Reactivities",color:"teal",textAlign:"center"}),a.a.createElement(I,{placeholder:"DisplayName",name:"displayName"}),a.a.createElement(I,{placeholder:"Username",name:"username"}),a.a.createElement(I,{placeholder:"Email",name:"email"}),a.a.createElement(I,{placeholder:"Password",name:"password",type:"password"}),a.a.createElement(P.a,{name:"error",render:function(){return a.a.createElement(R,{errors:r.error})}}),a.a.createElement(O.a,{disabled:!o||!i||n,loading:n,positive:!0,content:"Register",type:"submit",fluid:!0}))})}),z=n(232),H=n.n(z),U=Object(k.a)(function(){var e=St(),t=e.userStore,n=e.modalStore;return a.a.createElement(S.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead"},a.a.createElement(b.a,{text:!0},a.a.createElement(C.a,{as:"h1",inverted:!0},a.a.createElement(j.a,{size:"massive",src:"/assets/logo.png",alt:"logo",style:{marginBottom:12}}),"Reactivities"),t.isLoggedIn?a.a.createElement(a.a.Fragment,null,a.a.createElement(C.a,{as:"h2",inverted:!0,content:"Welcome back ".concat(t.user.displayName)}),a.a.createElement(O.a,{as:E.a,to:"/activities",size:"huge",inverted:!0},"Go to activities!")):a.a.createElement(a.a.Fragment,null,a.a.createElement(O.a,{onClick:function(){return n.openModal(a.a.createElement(G,null))},size:"huge",inverted:!0},"Login"),a.a.createElement(O.a,{onClick:function(){return n.openModal(a.a.createElement(D,null))},size:"huge",inverted:!0},"Register"),a.a.createElement(A.a,{horizontal:!0,inverted:!0},"Or"),a.a.createElement(O.a,{as:H.a,appId:"1745409969236898",size:"huge",inverted:!0,color:"facebook",content:"Login with Facebook",loading:t.fbLoading,onSuccess:function(e){t.facebookLogin(e.accessToken),console.log("Login success.",e)},onFail:function(e){console.log("Login failed.",e)}}))))}),V=n(373),q=n(358);function B(e){var t=e.inverted,n=void 0===t||t,r=e.content,o=void 0===r?"Loading...":r;return a.a.createElement(V.a,{active:!0,inverted:n},a.a.createElement(q.a,{content:o}))}var Y=n(365),J=Object(k.a)(function(){var e=St().modalStore;return a.a.createElement(Y.a,{open:e.modal.open,onClose:e.closeModal,size:"mini"},a.a.createElement(Y.a.Content,null,e.modal.body))});var K=Object(k.a)(function(){var e=Object(y.m)(),t=St(),n=t.commonStore,o=t.userStore;return Object(r.useEffect)(function(){n.token?o.getUser().finally(function(){return n.setAppLoaded()}):n.setAppLoaded()},[n,o]),n.appLoaded?a.a.createElement(a.a.Fragment,null,a.a.createElement(E.c,null),a.a.createElement(J,null),a.a.createElement(g.a,{position:"bottom-right",hideProgressBar:!0,theme:"colored"}),"/"===e.pathname?a.a.createElement(U,null):a.a.createElement(a.a.Fragment,null,a.a.createElement(L,null),a.a.createElement(b.a,{style:{marginTop:"7em"}},a.a.createElement(y.b,null)))):a.a.createElement(B,{content:"Loading..."})}),W=n(246),Q=n(234),X=n(243),Z=n(95),$=n(341),ee=n(366),te=n(363),ne=n(367),re=n(377),ae=Object(k.a)(function(e){var t=e.profile,n=St(),r=n.profileStore,o=n.userStore,i=r.updateFollowing,c=r.loading;if(o.user.username===t.username)return null;return a.a.createElement(re.a,{animated:"move"},a.a.createElement(re.a.Content,{visible:!0,style:{width:"100%"}},a.a.createElement(O.a,{fluid:!0,color:"teal",content:t.following?"Following":"Not Following"})),a.a.createElement(re.a.Content,{hidden:!0,style:{width:"100%"}},a.a.createElement(O.a,{fluid:!0,basic:!0,color:t.following?"red":"green",content:t.following?"Unfollow":"Follow",loading:c,onClick:function(e){return function(e,n){e.preventDefault(),t.following?i(n,!1):i(n,!0)}(e,t.username)}})))}),oe=Object(k.a)(function(e){var t=e.profile;return a.a.createElement(ne.a,{as:E.a,to:"/profiles/".concat(t.username)},a.a.createElement(j.a,{src:t.image||"/assets/user.png"}),a.a.createElement(ne.a.Content,null,a.a.createElement(ne.a.Header,null,t.displayName),a.a.createElement(ne.a.Description,null,null==t.bio?"Bio here...":function(e){if(e)return e.length>40?e.substring(0,37)+"...":e}(t.bio))),a.a.createElement(ne.a.Content,{extra:!0},a.a.createElement(Z.a,{name:"user"}),t.followersCount," followers"),a.a.createElement(ae,{profile:t}))}),ie=Object(k.a)(function(e){var t=e.attendees,n={borderColor:"orange",borderWidth:3};return a.a.createElement(ee.a,{horizontal:!0},t.map(function(e){return a.a.createElement(te.a,{hoverable:!0,key:e.username,trigger:a.a.createElement(ee.a.Item,{key:e.username,as:E.a,to:"/profiles/".concat(e.username)},a.a.createElement(j.a,{size:"mini",circular:!0,src:e.image||"/assets/user.png",bordered:!0,style:e.following?n:null}))},a.a.createElement(te.a.Content,null,a.a.createElement(oe,{profile:e})))}))});function ce(e){var t=e.activity,n=Object(r.useState)(""),o=Object(T.a)(n,2),i=(o[0],o[1],St().activityStore);i.deleteActivity,i.loading;return a.a.createElement(S.a.Group,null,a.a.createElement(S.a,null,t.isCancelled&&a.a.createElement(N.a,{attached:"top",color:"red",content:"Cancelled",style:{textAlign:"center"}}),a.a.createElement(Q.a,null,a.a.createElement(X.a,null,a.a.createElement(X.a.Image,{style:{marginBottom:4},size:"tiny",circular:!0,src:t.host.image||"/assets/user.png"}),a.a.createElement(X.a.Content,null,a.a.createElement(X.a.Header,{as:E.a,to:"/activities/".concat(t.id)},t.title),a.a.createElement(X.a.Description,null,"Hosted by ",a.a.createElement(E.a,{to:"/profiles/".concat(t.hostUserName)},t.host.displayName)),t.isHost&&a.a.createElement(X.a.Description,null,a.a.createElement(N.a,{basic:!0,color:"orange"},"You are hosting this activity")),t.isGoing&&!t.isHost&&a.a.createElement(X.a.Description,null,a.a.createElement(N.a,{basic:!0,color:"green"},"You are going to this activity")))))),a.a.createElement(S.a,null,a.a.createElement("span",null,a.a.createElement(Z.a,{name:"clock"})," ",Object($.default)(t.date,"dd MMM yyyy h:mm aa"),a.a.createElement(Z.a,{name:"marker"})," ",t.venue)),a.a.createElement(S.a,{secondary:!0},a.a.createElement(ie,{attendees:t.attendees})),a.a.createElement(S.a,{clearing:!0},a.a.createElement("span",null,t.description),a.a.createElement(O.a,{as:E.a,to:"/activities/".concat(t.id),color:"teal",floated:"right",content:"View"})))}var le=Object(k.a)(function(){var e=St().activityStore.groupedActivities;return a.a.createElement(a.a.Fragment,null,e.map(function(e){var t=Object(T.a)(e,2),n=t[0],o=t[1];return a.a.createElement(r.Fragment,{key:n},a.a.createElement(C.a,{sub:!0,color:"teal"},n),o.map(function(e){return a.a.createElement(ce,{key:e.id,activity:e})}))}))}),ue=n(241),se=Object(k.a)(function(){var e=St().activityStore,t=e.predicate,n=e.setPredicate;return a.a.createElement(a.a.Fragment,null,a.a.createElement(w.a,{vertical:!0,size:"large",style:{width:"100%",marginTop:25}},a.a.createElement(C.a,{icon:"filter",attached:!0,color:"teal",content:"Filters"}),a.a.createElement(w.a.Item,{content:"All Activities",active:t.has("all"),onClick:function(){return n("all","true")}}),a.a.createElement(w.a.Item,{content:"I'm going",active:t.has("isGoing"),onClick:function(){return n("isGoing","true")}}),a.a.createElement(w.a.Item,{content:"I'm hosting",active:t.has("isHost"),onClick:function(){return n("isHost","true")}})),a.a.createElement(C.a,null),a.a.createElement(ue.a,{onChange:function(e){return n("startDate",e)},value:t.get("startDate")||new Date}))}),fe=function e(t,n){Object(f.a)(this,e),this.data=void 0,this.pagination=void 0,this.data=t,this.pagination=n},he=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;Object(f.a)(this,e),this.pageNumber=void 0,this.pageSize=void 0,this.pageNumber=t,this.pageSize=n},me=n(235),de=n.n(me),pe=n(370);function ve(){return a.a.createElement(r.Fragment,null,a.a.createElement(pe.a,{fluid:!0,style:{marginTop:25}},a.a.createElement(S.a.Group,null,a.a.createElement(S.a,{style:{minHeight:110}},a.a.createElement(pe.a,null,a.a.createElement(pe.a.Header,{image:!0},a.a.createElement(pe.a.Line,null),a.a.createElement(pe.a.Line,null)),a.a.createElement(pe.a.Paragraph,null,a.a.createElement(pe.a.Line,null)))),a.a.createElement(S.a,null,a.a.createElement(pe.a,null,a.a.createElement(pe.a.Line,null),a.a.createElement(pe.a.Line,null))),a.a.createElement(S.a,{secondary:!0,style:{minHeight:70}}),a.a.createElement(S.a,{clearing:!0},a.a.createElement(O.a,{disabled:!0,color:"blue",floated:"right",content:"View"})))))}var ge=Object(k.a)(function(){var e=St().activityStore,t=e.loadActivities,n=e.activityRegistry,o=e.setPagingParams,i=e.pagination,c=Object(r.useState)(!1),l=Object(T.a)(c,2),u=l[0],s=l[1];return Object(r.useEffect)(function(){n.size<=1&&t()},[n.size,t]),a.a.createElement(W.a,null,a.a.createElement(W.a.Column,{width:"10"},e.loadingInitial&&!u?a.a.createElement(a.a.Fragment,null,a.a.createElement(ve,null),a.a.createElement(ve,null)):a.a.createElement(de.a,{pageStart:0,loadMore:function(){s(!0),o(new he(i.currentPage+1)),t().then(function(){return s(!1)})},hasMore:!u&&!!i&&i.currentPage<i.totalPages,initialLoad:!1},a.a.createElement(le,null))),a.a.createElement(W.a.Column,{width:"6"},a.a.createElement(se,null)),a.a.createElement(W.a.Column,{width:10},a.a.createElement(q.a,{active:u})))}),ye=n(368);function Ee(e){var t=Object(P.e)(e.name),n=Object(T.a)(t,2),r=n[0],o=n[1];return a.a.createElement(F.a.Field,{error:o.touched&&!!o.error},a.a.createElement("label",null,e.label),a.a.createElement("textarea",Object.assign({},r,e)),o.touched&&o.error?a.a.createElement(N.a,{basic:!0,color:"red"},o.error):null)}var be=n(356);function we(e){var t=Object(P.e)(e.name),n=Object(T.a)(t,3),r=n[0],o=n[1],i=n[2];return a.a.createElement(F.a.Field,{error:o.touched&&!!o.error},a.a.createElement("label",null,e.label),a.a.createElement(be.a,{clearable:!0,options:e.options,value:r.value||null,onChange:function(e,t){return i.setValue(t.value)},onBlur:function(){return i.setTouched(!0)},placeholder:e.placeholder}),o.touched&&o.error?a.a.createElement(N.a,{basic:!0,color:"red"},o.error):null)}var Oe=[{text:"Drinks",value:"drinks"},{text:"Culture",value:"culture"},{text:"Film",value:"film"},{text:"Food",value:"food"},{text:"Music",value:"music"},{text:"Travel",value:"travel"}],je=n(236),xe=n.n(je);function ke(e){var t=Object(P.e)(e.name),n=Object(T.a)(t,3),r=n[0],o=n[1],i=n[2];return a.a.createElement(F.a.Field,{error:o.touched&&!!o.error},a.a.createElement(xe.a,Object.assign({openToDate:new Date||null},r,e,{selected:r.value&&new Date(r.value)||null,onChange:function(e){return i.setValue(e)}})),o.touched&&o.error?a.a.createElement(N.a,{basic:!0,color:"red"},o.error):null)}var Le=Object(k.a)(function(){var e=St().activityStore,t=e.createActivity,n=e.updateActivity,o=e.loadActivity,i=e.loadingInitial,c=Object(y.q)().id,l=Object(y.o)(),s=Object(r.useState)(new p),f=Object(T.a)(s,2),h=f[0],m=f[1],d=_.a({title:_.b().required("The activity title is required."),description:_.b().required("The activity description is required."),category:_.b().required(),date:_.b().required(),venue:_.b().required(),city:_.b().required()});return Object(r.useEffect)(function(){c&&o(c).then(function(e){return m(new p(e))})},[c,o]),i?a.a.createElement(B,{content:"Loading activity..."}):a.a.createElement(S.a,{clearing:!0},a.a.createElement(C.a,{content:"Activity Details",sub:!0,color:"teal"}),a.a.createElement(P.d,{validationSchema:d,enableReinitialize:!0,initialValues:h,onSubmit:function(e){return function(e){if(e.id)n(e).then(function(){return l("/activities/".concat(e.id))});else{var r=Object(u.a)({},e,{id:Object(ye.a)()});t(r).then(function(){return l("/activities/".concat(r.id))})}}(e)}},function(e){var t=e.handleSubmit,n=e.isValid,r=e.isSubmitting,o=e.dirty;return a.a.createElement(P.c,{className:"ui form",onSubmit:t,autoComplete:"off"},a.a.createElement(I,{placeholder:"title",name:"title"}),a.a.createElement(Ee,{rows:3,placeholder:"Description",name:"description"}),a.a.createElement(we,{options:Oe,placeholder:"Category",name:"category"}),a.a.createElement(ke,{placeholderText:"Date",name:"date",showTimeSelect:!0,timeCaption:"time",dateFormat:"MMMM d, yyyy h:mm aa"}),a.a.createElement(C.a,{content:"Location Details",sub:!0,color:"teal"}),a.a.createElement(I,{placeholder:"City",name:"city"}),a.a.createElement(I,{placeholder:"Venue",name:"venue"}),a.a.createElement(O.a,{disabled:r||!o||!n,loading:r,floated:"right",positive:!0,type:"submit",content:"Submit"}),a.a.createElement(O.a,{as:E.a,to:"/activities",floated:"right",type:"button",content:"Cancel"}))}))}),Se={filter:"brightness(30%)"},Ce={position:"absolute",bottom:"5%",left:"5%",width:"100%",height:"auto",color:"white"},Ae=Object(k.a)(function(e){var t=e.activity,n=St().activityStore,r=n.updateAttendance,o=n.loading,i=n.cancelActivityToogle;return a.a.createElement(S.a.Group,null,a.a.createElement(S.a,{basic:!0,attached:"top",style:{padding:"0"}},t.isCancelled&&a.a.createElement(N.a,{style:{position:"absolute",zIndex:1e3,left:-14,top:20},ribbon:!0,color:"red",content:"Cancelled"}),a.a.createElement(j.a,{src:"/assets/categoryImages/".concat(t.category,".jpg"),fluid:!0,style:Se}),a.a.createElement(S.a,{style:Ce,basic:!0},a.a.createElement("div",{className:"ui items"},a.a.createElement(X.a,null,a.a.createElement(X.a.Content,null,a.a.createElement(C.a,{size:"huge",content:t.title,style:{color:"white"}}),a.a.createElement("p",null,Object($.default)(t.date,"dd MMM yyyy h:mm aa")),a.a.createElement("p",null,"Hosted by ",a.a.createElement("strong",null,a.a.createElement(E.a,{to:"/profiles/".concat(t.host.displayName)},t.host.displayName)))))))),a.a.createElement(S.a,{clearing:!0,attached:"bottom"},t.isHost?a.a.createElement(a.a.Fragment,null,a.a.createElement(O.a,{color:t.isCancelled?"green":"red",floated:"left",basic:!0,content:t.isCancelled?"Re-activate Activity":"Cancel Activity",onClick:i,loading:o}),a.a.createElement(O.a,{disabled:t.isCancelled,as:E.a,to:"/manage/".concat(t.id),color:"orange",floated:"right"},"Manage Event")):t.isGoing?a.a.createElement(O.a,{loading:o,onClick:r},"Cancel attendance"):a.a.createElement(O.a,{disabled:t.isCancelled,loading:o,onClick:r,color:"teal"},"Join Activity")))}),Pe=Object(k.a)(function(e){var t=e.activity;return a.a.createElement(S.a.Group,null,a.a.createElement(S.a,{attached:"top"},a.a.createElement(W.a,null,a.a.createElement(W.a.Column,{width:1},a.a.createElement(Z.a,{size:"large",color:"teal",name:"info"})),a.a.createElement(W.a.Column,{width:15},a.a.createElement("p",null,t.description)))),a.a.createElement(S.a,{attached:!0},a.a.createElement(W.a,{verticalAlign:"middle"},a.a.createElement(W.a.Column,{width:1},a.a.createElement(Z.a,{name:"calendar",size:"large",color:"teal"})),a.a.createElement(W.a.Column,{width:15},a.a.createElement("span",null,Object($.default)(t.date,"dd MMM yyyy h:mm aa"))))),a.a.createElement(S.a,{attached:!0},a.a.createElement(W.a,{verticalAlign:"middle"},a.a.createElement(W.a.Column,{width:1},a.a.createElement(Z.a,{name:"marker",size:"large",color:"teal"})),a.a.createElement(W.a.Column,{width:11},a.a.createElement("span",null,t.venue,", ",t.city)))))}),Te=n(364),Fe=n(362),Ne=Object(k.a)(function(e){var t=e.activityId,n=St().commentStore;return Object(r.useEffect)(function(){return t&&n.createHubConnection(t),function(){return n.clearComments()}},[n,t]),a.a.createElement(a.a.Fragment,null,a.a.createElement(S.a,{textAlign:"center",attached:"top",inverted:!0,color:"teal",style:{border:"none"}},a.a.createElement(C.a,null,"Chat about this event")),a.a.createElement(S.a,{attached:!0,clearing:!0},a.a.createElement(P.d,{initialValues:{body:""},onSubmit:function(e,t){var r=t.resetForm;return n.addComment(e).then(function(){return r()})},validationSchema:_.a({body:_.b().required()})},function(e){var t=e.isSubmitting,n=e.isValid,r=e.handleSubmit;return a.a.createElement(P.c,{className:"ui form"},a.a.createElement(P.b,{name:"body"},function(e){return a.a.createElement("div",{style:{position:"relative"}},a.a.createElement(q.a,{active:t}),a.a.createElement("textarea",Object.assign({placeholder:"Enter your comment (Enter to submit, SHIFT + enter for new line)",rows:2},e.field,{onKeyPress:function(e){"Enter"==e.key&&e.shiftKey||"Enter"!=e.key||e.shiftKey||(e.preventDefault(),n&&r())}})))}))}),a.a.createElement(Te.a.Group,null,n.comments.map(function(e){return a.a.createElement(Te.a,{key:e.id},a.a.createElement(Te.a.Avatar,{src:e.image||"/assets/user.png"}),a.a.createElement(Te.a.Content,null,a.a.createElement(Te.a.Author,{as:E.a,to:"/profiles/".concat(e.username)},e.displayName),a.a.createElement(Te.a.Metadata,null,a.a.createElement("div",null,Object(Fe.a)(e.createAt)," ago")),a.a.createElement(Te.a.Text,{style:{whiteSpace:"pre-wrap"}},e.body)))}))))}),Ie=Object(k.a)(function(e){var t=e.activity,n=t.attendees,r=t.host;return n?a.a.createElement(a.a.Fragment,null,a.a.createElement(S.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal"},n.length," ",1===n.length?"Person":"People"," going"),a.a.createElement(S.a,{attached:!0},a.a.createElement(ee.a,{relaxed:!0,divided:!0},n.map(function(e){return a.a.createElement(X.a,{style:{position:"relative"},key:e.username},e.username===r.username&&a.a.createElement(N.a,{style:{position:"absolute"},color:"orange",ribbon:"right"},"Host"),a.a.createElement(j.a,{size:"tiny",src:e.image||"/assets/user.png"}),a.a.createElement(X.a.Content,{verticalAlign:"middle"},a.a.createElement(X.a.Header,{as:"h3"},a.a.createElement(E.a,{to:"/profiles/".concat(e.username)},e.displayName)),e.following&&a.a.createElement(X.a.Extra,{style:{color:"orange"}},"Following")))})))):null}),_e=Object(k.a)(function(){var e=St().activityStore,t=e.selectedActivity,n=e.loadActivity,o=e.loadingInitial,i=e.clearSelectedActivity,c=Object(y.q)().id;return Object(r.useEffect)(function(){return c&&n(c),function(){return i()}},[c,n,i]),o||!t?a.a.createElement(B,null):a.a.createElement(W.a,null,a.a.createElement(W.a.Column,{width:10},a.a.createElement(Ae,{activity:t}),a.a.createElement(Pe,{activity:t}),a.a.createElement(Ne,{activityId:t.id})),a.a.createElement(W.a.Column,{width:6},a.a.createElement(Ie,{activity:t})))});function Ge(){var e=Object(r.useState)(null),t=Object(T.a)(e,2),n=t[0],o=t[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(C.a,{as:"h1",content:"Test Error component"}),a.a.createElement(S.a,null,a.a.createElement(O.a.Group,{widths:"7"},a.a.createElement(O.a,{onClick:function(){v.a.get("/buggy/not-found").catch(function(e){return console.log(e.response)})},content:"Not Found",basic:!0,primary:!0}),a.a.createElement(O.a,{onClick:function(){v.a.get("/buggy/bad-request").catch(function(e){return console.log(e.response)})},content:"Bad Request",basic:!0,primary:!0}),a.a.createElement(O.a,{onClick:function(){v.a.post("/activities",{}).catch(function(e){return o(e)})},content:"Validation Error",basic:!0,primary:!0}),a.a.createElement(O.a,{onClick:function(){v.a.get("/buggy/server-error").catch(function(e){return console.log(e.response)})},content:"Server Error",basic:!0,primary:!0}),a.a.createElement(O.a,{onClick:function(){v.a.get("/buggy/unauthorised").catch(function(e){return console.log(e.response)})},content:"Unauthorised",basic:!0,primary:!0}),a.a.createElement(O.a,{onClick:function(){v.a.get("/activities/notaguid").catch(function(e){return console.log(e.response)})},content:"Bad Guid",basic:!0,primary:!0}))),n&&a.a.createElement(R,{errors:n}))}function Me(){return a.a.createElement(S.a,{placeholder:!0},a.a.createElement(C.a,{icon:!0},a.a.createElement(Z.a,{name:"search"}),"Oops - we've looked everywhere but could not find what you are looking for!"),a.a.createElement(S.a.Inline,null,a.a.createElement(O.a,{as:E.a,to:"/activities"},"Return to activities page")))}var Re=Object(k.a)(function(){var e=St().commonStore;return a.a.createElement(b.a,null,a.a.createElement(C.a,{as:"h1",content:"Server Error"}),a.a.createElement(C.a,{as:"h5",color:"red",content:null==e.error?null:e.error.message}),(null==e.error?null:e.error.details)&&a.a.createElement(S.a,null,a.a.createElement(C.a,{as:"h4",content:"Stack Trace",color:"teal"}),a.a.createElement("code",{style:{marginTop:"10px"}},null==e.error?null:e.error.details)))}),De=n(372),ze=Object(k.a)(function(e){var t=e.profile;return a.a.createElement(S.a,null,a.a.createElement(W.a,null,a.a.createElement(W.a.Column,{width:12},a.a.createElement("div",{className:"ui items"},a.a.createElement(X.a,null,a.a.createElement(X.a.Image,{avatar:!0,size:"tiny",src:t.image||"/assets/user.png"}),a.a.createElement(X.a.Content,{verticalAlign:"middle"},a.a.createElement(C.a,{as:"h2",content:t.displayName}))))),a.a.createElement(W.a.Column,{width:4},a.a.createElement(De.a.Group,{widths:2},a.a.createElement(De.a,{label:"Followers",value:t.followersCount}),a.a.createElement(De.a,{label:"Following",value:t.followingCount})),a.a.createElement(A.a,null),a.a.createElement(ae,{profile:t}))))}),He=n(378),Ue=n(244);function Ve(e){var t=e.setFiles,n={border:"dashed 3px #eee",borderColor:"#eee",borderRadius:"5px",paddingTop:"30px",textAlign:"center",height:200},o=Object(r.useCallback)(function(e){t(e.map(function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})}))},[t]),i=Object(Ue.a)({onDrop:o}),c=i.getRootProps,l=i.getInputProps,s=i.isDragActive;return a.a.createElement("div",Object.assign({},c(),{style:s?Object(u.a)({},n,{borderColor:"green"}):n}),a.a.createElement("input",l()),a.a.createElement(Z.a,{name:"upload",size:"huge"}),a.a.createElement(C.a,{content:"Drop image here"}))}var qe=n(239);n(338);function Be(e){var t=e.imagePreview,n=e.setCropper;return a.a.createElement(qe.a,{src:t,style:{height:200,width:"100%"},initialAspectRatio:1,aspectRatio:1,preview:".img-preview",guides:!1,viewMode:1,autoCropArea:1,background:!1,onInitialized:function(e){return n(e)}})}function Ye(e){var t=e.loading,n=e.uploadPhoto,o=Object(r.useState)([]),i=Object(T.a)(o,2),c=i[0],l=i[1],u=Object(r.useState)(),s=Object(T.a)(u,2),f=s[0],h=s[1];return Object(r.useEffect)(function(){return function(){c.forEach(function(e){return URL.revokeObjectURL(e.preview)})}},[c]),a.a.createElement(W.a,null,a.a.createElement(W.a.Column,{width:4},a.a.createElement(C.a,{sub:!0,color:"teal",content:"Step 1 - Add Photo"}),a.a.createElement(Ve,{setFiles:l})),a.a.createElement(W.a.Column,{width:1}),a.a.createElement(W.a.Column,{width:4},a.a.createElement(C.a,{sub:!0,color:"teal",content:"Step 2 - Resize Image"}),c&&c.length>0&&a.a.createElement(Be,{setCropper:h,imagePreview:c[0].preview})),a.a.createElement(W.a.Column,{width:1}),a.a.createElement(W.a.Column,{width:4},a.a.createElement(C.a,{sub:!0,color:"teal",content:"Step 1 - Preview & Upload"}),c&&c.length>0&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"img-preview",style:{minHeight:200,overflow:"hidden"}}),a.a.createElement(O.a.Group,{widths:2},a.a.createElement(O.a,{loading:t,onClick:function(){f&&f.getCroppedCanvas().toBlob(function(e){return n(e)})},positive:!0,icon:"check"}),a.a.createElement(O.a,{disabled:t,onClick:function(){return l([])},icon:"close"})))))}var Je=Object(k.a)(function(e){var t=e.profile,n=St().profileStore,o=n.isCurrentUser,i=n.uploadPhoto,c=n.uploading,l=n.setMainPhoto,u=n.loading,s=n.deletePhoto,f=Object(r.useState)(!1),h=Object(T.a)(f,2),m=h[0],d=h[1],p=Object(r.useState)(""),v=Object(T.a)(p,2),g=v[0],y=v[1];return a.a.createElement(He.a.Pane,null,a.a.createElement(W.a,null,a.a.createElement(W.a.Column,{width:16},a.a.createElement(C.a,{floated:"left",icon:"image",content:"Photos"}),o&&a.a.createElement(O.a,{floated:"right",basic:!0,content:m?"Cancel":"Add Photo",onClick:function(){return d(!m)}})),a.a.createElement(W.a.Column,{width:16},m?a.a.createElement(Ye,{uploadPhoto:function(e){i(e).then(function(){return d(!1)})},loading:c}):a.a.createElement(ne.a.Group,{itemsPerRow:5},t.photos.map(function(e){return a.a.createElement(ne.a,{key:e.id},a.a.createElement(j.a,{src:e.url}),o&&a.a.createElement(O.a.Group,{fluid:!0,widths:2},a.a.createElement(O.a,{basic:!0,color:"green",content:"Main",name:"main"+e.id,disabled:e.isMain,loading:g==="main"+e.id&&u,onClick:function(t){return function(e,t){y(t.currentTarget.name),l(e)}(e,t)}}),a.a.createElement(O.a,{basic:!0,color:"red",icon:"trash",name:e.id,disabled:e.isMain,loading:g===e.id&&u,onClick:function(t){return function(e,t){y(t.currentTarget.name),s(e)}(e,t)}})))})))))}),Ke=Object(k.a)(function(e){var t=e.setEditMode,n=St().profileStore,r=n.profile,o=n.updateProfile;return a.a.createElement(P.d,{initialValues:{displayName:r.displayName,bio:r.bio,error:null},onSubmit:function(e,n){var r=n.setErrors;o(e).then(function(){t(!1)}).catch(function(e){return r({error:e})})},validationSchema:_.a({displayName:_.b().required()})},function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.isValid,o=e.errors,i=e.dirty;return a.a.createElement(P.c,{className:"ui form error",onSubmit:t,autoComplete:"off"},a.a.createElement(I,{placeholder:"Display Name",name:"displayName"}),a.a.createElement(Ee,{rows:3,placeholder:"Add your bio",name:"bio"}),a.a.createElement(P.a,{name:"error",render:function(){return a.a.createElement(R,{errors:o.error})}}),a.a.createElement(O.a,{disabled:!r||!i,loading:n,positive:!0,content:"Update profile",type:"submit",floated:"right"}))})}),We=Object(k.a)(function(){var e=St().profileStore,t=e.isCurrentUser,n=e.profile,o=Object(r.useState)(!1),i=Object(T.a)(o,2),c=i[0],l=i[1];return a.a.createElement(He.a.Pane,null,a.a.createElement(W.a,null,a.a.createElement(W.a.Column,{width:16},a.a.createElement(C.a,{floated:"left",icon:"user",content:"About ".concat(n.displayName)}),t&&a.a.createElement(O.a,{floated:"right",basic:!0,content:c?"Cancel":"Edit Profile",onClick:function(){return l(!c)}})),a.a.createElement(W.a.Column,{width:16},c?a.a.createElement(Ke,{setEditMode:l}):a.a.createElement("span",{style:{whiteSpace:"pre-wrap"}},n.bio))))}),Qe=Object(k.a)(function(){var e=St().profileStore,t=e.profile,n=e.followings,r=e.loadingFollowings,o=e.activeTab;return a.a.createElement(He.a.Pane,{loading:r},a.a.createElement(W.a,null,a.a.createElement(W.a.Column,{width:16},a.a.createElement(C.a,{floated:"left",icon:"user",content:3===o?"People following ".concat(t.displayName):"People ".concat(t.displayName," is following")})),a.a.createElement(W.a.Column,{width:16},a.a.createElement(ne.a.Group,{itemsPerRow:4},n.map(function(e){return a.a.createElement(oe,{key:e.username,profile:e})})))))}),Xe=[{menuItem:"Future Events",pane:{key:"future"}},{menuItem:"Past Events",pane:{key:"past"}},{menuItem:"Hosting",pane:{key:"hosting"}}],Ze=Object(k.a)(function(){var e=St().profileStore,t=e.loadUserActivities,n=e.profile,o=e.loadingActivities,i=e.userActivities;Object(r.useEffect)(function(){t(n.username)},[t,n]);return a.a.createElement(He.a.Pane,{loading:o},a.a.createElement(W.a,null,a.a.createElement(W.a.Column,{width:16},a.a.createElement(C.a,{floated:"left",icon:"calendar",content:"Activities"})),a.a.createElement(W.a.Column,{width:16},a.a.createElement(He.a,{panes:Xe,menu:{secondary:!0,pointing:!0},onTabChange:function(e,r){return function(e,r){t(n.username,Xe[r.activeIndex].pane.key)}(0,r)}}),a.a.createElement("br",null),a.a.createElement(ne.a.Group,{itemsPerRow:4},i.map(function(e){return a.a.createElement(ne.a,{as:E.a,to:"/activities/".concat(e.activityId),key:e.activityId},a.a.createElement(j.a,{src:"/assets/categoryImages/".concat(e.category,".jpg")}),a.a.createElement(ne.a.Content,null,a.a.createElement(ne.a.Header,{textAlign:"center"},e.title),a.a.createElement(ne.a.Meta,{textAlign:"center"},a.a.createElement("div",null,Object($.default)(new Date(e.date),"do LLL")),a.a.createElement("div",null,Object($.default)(new Date(e.date),"h:mm a")))))})))))}),$e=Object(k.a)(function(e){var t=e.profile,n=St().profileStore,r=[{menuItem:"About",render:function(){return a.a.createElement(We,null)}},{menuItem:"Photos",render:function(){return a.a.createElement(Je,{profile:t})}},{menuItem:"Events",render:function(){return a.a.createElement(Ze,null)}},{menuItem:"Followers",render:function(){return a.a.createElement(Qe,null)}},{menuItem:"Following",render:function(){return a.a.createElement(Qe,null)}}];return a.a.createElement(He.a,{menu:{fluid:!0,vertical:!0},menuPosition:"right",panes:r,onTabChange:function(e,t){return n.setactiveTab(t.activeIndex)}})}),et=Object(k.a)(function(){var e=Object(y.q)().username,t=St().profileStore,n=t.loadingProfile,o=t.loadProfile,i=t.profile,c=t.setactiveTab;return Object(r.useEffect)(function(){return e&&o(e),function(){c(0)}},[o,e,c]),n?a.a.createElement(B,{content:"Loading profile..."}):a.a.createElement(W.a,null,a.a.createElement(W.a.Column,{width:16},i&&a.a.createElement(a.a.Fragment,null,a.a.createElement(ze,{profile:i}),a.a.createElement($e,{profile:i}))))});function tt(){var e=St().userStore.isLoggedIn,t=Object(y.m)();return e?a.a.createElement(y.b,null):a.a.createElement(y.a,{to:"/",state:{from:t}})}function nt(){return new URLSearchParams(Object(y.m)().search)}function rt(){var e=nt().get("email");return a.a.createElement(S.a,{placeholder:!0,textAlign:"center"},a.a.createElement(C.a,{icon:!0,color:"green"},a.a.createElement(Z.a,{name:"check"}),"Successfully registered!"),a.a.createElement("p",null,"Please check your email (including junk mail) for the verification email."),e&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"Didn't received email? Click button below to resend"),a.a.createElement(O.a,{primary:!0,onClick:function(){mt.account.resendEmailConfirm(e).then(function(){g.b.success("Verification email resent - please check your email.")}).catch(function(e){return console.log(e)})},content:"Resend email",size:"huge"})))}function at(){var e=St().modalStore,t=nt().get("email"),n=nt().get("token"),o={Verifying:"Verifying",Failed:"Failed",Success:"Success"},i=Object(r.useState)(o.Verifying),c=Object(T.a)(i,2),l=c[0],u=c[1];function s(){mt.account.resendEmailConfirm(t).then(function(){g.b.success("Verification email resent - please check your email.")}).catch(function(e){return console.log(e)})}return Object(r.useEffect)(function(){mt.account.verifyEmail(n,t).then(function(){u(o.Success)}).catch(function(){u(o.Failed)})},[o.Success,o.Failed,n,t]),a.a.createElement(S.a,{placeholder:!0,textAlign:"center"},a.a.createElement(C.a,{icon:!0},a.a.createElement(Z.a,{name:"envelope"}),"Email verification"),a.a.createElement(S.a.Inline,null,function(){switch(l){case o.Verifying:return a.a.createElement("p",null,"Verifying...");case o.Failed:return a.a.createElement("div",null,a.a.createElement("p",null,"Verification failed. You can try resending the verify link to your email."),a.a.createElement(O.a,{primary:!0,onClick:s,size:"huge",content:"Resend email"}));case o.Success:return a.a.createElement("div",null,a.a.createElement("p",null,"Email has been verified - you can now login."),a.a.createElement(O.a,{primary:!0,onClick:function(){return e.openModal(a.a.createElement(G,null))},size:"huge"},"Login"))}}()))}var ot=[{path:"/",element:a.a.createElement(K,null),children:[{element:a.a.createElement(tt,null),children:[{path:"",element:a.a.createElement(U,null)},{path:"activities",element:a.a.createElement(ge,null)},{path:"activities/:id",element:a.a.createElement(_e,null)},{path:"createActivity",element:a.a.createElement(Le,{key:"create"})},{path:"manage/:id",element:a.a.createElement(Le,{key:"manage"})},{path:"profiles/:username",element:a.a.createElement(et,null)},{path:"errors",element:a.a.createElement(Ge,null)}]},{path:"login",element:a.a.createElement(G,null)},{path:"not-found",element:a.a.createElement(Me,null)},{path:"server-error",element:a.a.createElement(Re,null)},{path:"account/registerSuccess",element:a.a.createElement(rt,null)},{path:"account/verifyEmail",element:a.a.createElement(at,null)},{path:"*",element:a.a.createElement(y.a,{replace:!0,to:"/not-found"})}]}],it=Object(E.d)(ot);function ct(){ct=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new k(a||[]);return r(i,"_invoke",{value:w(e,n,c)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var f={};function h(){}function m(){}function d(){}var p={};l(p,o,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&n.call(g,o)&&(p=g);var y=d.prototype=h.prototype=Object.create(p);function E(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t(function(a,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,i,c)},function(e){r("throw",e,i,c)}):t.resolve(f).then(function(e){u.value=e,i(u)},function(e){return r("throw",e,i,c)})}c(l.arg)}(r,o,a,i)})}return a=a?a.then(i,i):i()}})}function w(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return S()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function O(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var a=s(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,f;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=d,r(y,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:m,configurable:!0}),m.displayName=l(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},E(b.prototype),l(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new b(u(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},E(y),l(y,c,"Generator"),l(y,o,function(){return this}),l(y,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;x(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}v.a.defaults.baseURL="/api",v.a.interceptors.response.use(function(){var e=Object(s.a)(ct().mark(function e(t){var n;return ct().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=3;break;case 3:if(!(n=t.headers.pagination)){e.next=7;break}return t.data=new fe(t.data,JSON.parse(n)),e.abrupt("return",t);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),function(e){var t=e.response,n=t.data,r=t.status,a=t.config,o=t.headers;switch(r){case 400:if("get"===a.method&&n.errors.hasOwnProperty("id")&&it.navigate("/not-found"),n.errors){var i=[];for(var c in n.errors)n.errors[c]&&i.push(n.errors[c]);throw i.flat()}g.b.error(n);break;case 401:401===r&&null!=o["www-authenticate"]&&o["www-authenticate"].startsWith('Bearer error="invalid_token"')&&(kt.userStore.logout(),g.b.error("Session expired - please login again."));break;case 403:g.b.error("forbidden");break;case 404:it.navigate("/not-found");break;case 500:kt.commonStore.setServerError(n),it.navigate("/server-error")}return Promise.reject(e)});var lt=function(e){return e.data};v.a.interceptors.request.use(function(e){var t=kt.commonStore.token;return t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t)),e});var ut=function(e){return v.a.get(e).then(lt)},st=function(e,t){return v.a.post(e,t).then(lt)},ft=function(e,t){return v.a.put(e,t).then(lt)},ht=function(e){return v.a.delete(e).then(lt)},mt={activities:{list:function(e){return v.a.get("/activities",{params:e}).then(lt)},details:function(e){return ut("/activities/".concat(e))},create:function(e){return st("/activities",e)},update:function(e){return ft("/activities/".concat(e.id),e)},delete:function(e){return ht("/activities/".concat(e))},attend:function(e){return st("/activities/".concat(e,"/attend"),[])}},account:{current:function(){return ut("/account")},login:function(e){return st("/account/login",e)},register:function(e){return st("/account/register",e)},fbLogin:function(e){return st("/account/fbLogin?accessToken=".concat(e),{})},refreshToken:function(){return st("/account/refreshToken",{})},verifyEmail:function(e,t){return st("/account/verifyEmail?token=".concat(e,"&email=").concat(t),{})},resendEmailConfirm:function(e){return ut("/account/resendEmailConfirmationLink?email=".concat(e))}},profiles:{get:function(e){return ut("/profiles/".concat(e))},uploadPhoto:function(e){var t=new FormData;return t.append("File",e),v.a.post("photos",t,{headers:{"Content-type":"multipart/form-data"}})},setMainphoto:function(e){return st("/photos/".concat(e,"/setMainPhoto"),{})},deletePhoto:function(e){return ht("/photos/".concat(e))},updateProfile:function(e){return ft("/profiles",e)},updateFollowing:function(e){return st("/follow/".concat(e),{})},listFollowings:function(e,t){return ut("/follow/".concat(e,"?predicate=").concat(t))},listActivities:function(e,t){return ut("/profiles/".concat(e,"/activities?predicate=").concat(t))}}},dt=function e(t){Object(f.a)(this,e),this.username=t.username,this.displayName=t.displayName,this.image=t.image};function pt(){pt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new k(a||[]);return r(i,"_invoke",{value:w(e,n,c)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var f={};function h(){}function m(){}function d(){}var p={};l(p,o,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&n.call(g,o)&&(p=g);var y=d.prototype=h.prototype=Object.create(p);function E(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t(function(a,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,i,c)},function(e){r("throw",e,i,c)}):t.resolve(f).then(function(e){u.value=e,i(u)},function(e){return r("throw",e,i,c)})}c(l.arg)}(r,o,a,i)})}return a=a?a.then(i,i):i()}})}function w(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return S()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function O(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var a=s(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,f;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=d,r(y,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:m,configurable:!0}),m.displayName=l(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},E(b.prototype),l(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new b(u(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},E(y),l(y,c,"Generator"),l(y,o,function(){return this}),l(y,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;x(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var vt=function(){function e(){var t=this;Object(f.a)(this,e),this.activityRegistry=new Map,this.selectedActivity=void 0,this.editMode=!1,this.loading=!1,this.loadingInitial=!0,this.isRefresh=!0,this.pagination=null,this.pagingParams=new he,this.predicate=(new Map).set("all",!0),this.setPagingParams=function(e){t.pagingParams=e},this.setPredicate=function(e,n){var r=function(){t.predicate.forEach(function(e,n){"startDate"!==n&&t.predicate.delete(n)})};switch(e){case"all":t.setLoadingInitial(!0),r(),t.predicate.set("all",!0);break;case"isGoing":t.setLoadingInitial(!0),r(),t.predicate.set("isGoing",!0);break;case"isHost":t.setLoadingInitial(!0),r(),t.predicate.set("isHost",!0);break;case"startDate":t.setLoadingInitial(!0),t.predicate.delete("startDate"),t.predicate.set("startDate",n)}},this.loadActivities=Object(s.a)(pt().mark(function e(){var n;return pt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mt.activities.list(t.axiosParams);case 3:(n=e.sent).data.forEach(function(e){return t.setActivity(e)}),t.setPagination(n.pagination),t.setLoadingInitial(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t.setLoadingInitial(!1);case 13:case"end":return e.stop()}},e,null,[[0,9]])})),this.setPagination=function(e){t.pagination=e},this.loadActivity=function(){var e=Object(s.a)(pt().mark(function e(n){var r;return pt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.getActivity(n))){e.next=6;break}return t.selectedActivity=r,e.abrupt("return",r);case 6:return t.setLoadingInitial(!0),e.prev=7,e.next=10,mt.activities.details(n);case 10:return r=e.sent,t.setActivity(r),Object(m.i)(function(){return t.selectedActivity=r}),t.setLoadingInitial(!1),e.abrupt("return",r);case 17:e.prev=17,e.t0=e.catch(7),console.log(e.t0),t.setLoadingInitial(!1);case 21:case"end":return e.stop()}},e,null,[[7,17]])}));return function(t){return e.apply(this,arguments)}}(),this.setActivity=function(e){var n=kt.userStore.user;n&&(e.isGoing=e.attendees.some(function(e){return e.username===n.username}),e.isHost=e.hostUserName===n.username,e.host=void 0==e.attendees?void 0:e.attendees.find(function(t){return t.username===e.hostUserName})),e.date=new Date(e.date),t.activityRegistry.set(e.id,e)},this.getActivity=function(e){return t.activityRegistry.get(e)},this.setLoadingInitial=function(e){return t.loadingInitial=e},this.createActivity=function(){var e=Object(s.a)(pt().mark(function e(n){var r,a,o;return pt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=kt.userStore.user,a=new dt(r),e.prev=2,e.next=5,mt.activities.create(n);case 5:(o=new d(n)).hostUserName=r.username,o.attendees=[a],t.setActivity(o),Object(m.i)(function(){return t.selectedActivity=o}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[2,12]])}));return function(t){return e.apply(this,arguments)}}(),this.updateActivity=function(){var e=Object(s.a)(pt().mark(function e(n){return pt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mt.activities.update(n);case 3:Object(m.i)(function(){if(n.id){var e=Object(u.a)({},t.getActivity(n.id),n);t.activityRegistry.set(n.id,e),t.selectedActivity=e}}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),this.deleteActivity=function(){var e=Object(s.a)(pt().mark(function e(n){return pt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,mt.activities.delete(n);case 4:Object(m.i)(function(){t.activityRegistry.delete(n),t.loading=!1}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),Object(m.i)(function(){return t.loading=!1});case 11:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),this.updateAttendance=Object(s.a)(pt().mark(function e(){var n;return pt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=kt.userStore.user,t.loading=!0,e.prev=2,e.next=5,mt.activities.attend(t.selectedActivity.id);case 5:Object(m.i)(function(){if(t.selectedActivity.isGoing)t.selectedActivity.attendees=t.selectedActivity.attendees.filter(function(e){return e.username!==n.username}),t.selectedActivity.isGoing=!1;else{var e=new dt(n);t.selectedActivity.attendees.push(e),t.selectedActivity.isGoing=!0}t.activityRegistry.set(t.selectedActivity.id,t.selectedActivity)}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:return e.prev=11,Object(m.i)(function(){return t.loading=!1}),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[2,8,11,14]])})),this.cancelActivityToogle=Object(s.a)(pt().mark(function e(){return pt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,mt.activities.attend(t.selectedActivity.id);case 4:Object(m.i)(function(){t.selectedActivity.isCancelled=!t.selectedActivity.isCancelled,t.activityRegistry.set(t.selectedActivity.id,t.selectedActivity)}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:return e.prev=10,Object(m.i)(function(){return t.loading=!1}),e.finish(10);case 13:case"end":return e.stop()}},e,null,[[1,7,10,13]])})),this.clearSelectedActivity=function(){t.selectedActivity=void 0},this.updateAttendeeFollowing=function(e){t.activityRegistry.forEach(function(t){t.attendees.forEach(function(t){t.username===e&&(t.following?t.followersCount--:t.followersCount++,t.following=!t.following)})})},Object(m.e)(this),Object(m.h)(function(){return t.predicate.keys()},function(){t.pagingParams=new he,t.activityRegistry.clear(),t.loadActivities()})}return Object(h.a)(e,[{key:"axiosParams",get:function(){var e=new URLSearchParams;return e.append("pageNumber",this.pagingParams.pageNumber.toString()),e.append("pageSize",this.pagingParams.pageSize.toString()),this.predicate.forEach(function(t,n){"startDate"===n?e.append(n,t.toISOString()):e.append(n,t)}),e}},{key:"activitiesByDate",get:function(){return Array.from(this.activityRegistry.values()).sort(function(e,t){return t.date.getTime()-e.date.getTime()})}},{key:"groupedActivities",get:function(){return Object.entries(this.activitiesByDate.reduce(function(e,t){var n=Object($.default)(t.date,"dd MMM yyyy");return e[n]=e[n]?[].concat(Object(l.a)(e[n]),[t]):[t],e},{}))}}]),e}(),gt=function(){function e(){var t=this;Object(f.a)(this,e),this.error=null,this.token=localStorage.getItem("jwt"),this.appLoaded=!1,this.setToken=function(e){t.token=e},this.setAppLoaded=function(){t.appLoaded=!0},Object(m.e)(this),Object(m.h)(function(){return t.token},function(e){e?localStorage.setItem("jwt",e):localStorage.removeItem("jwt")})}return Object(h.a)(e,[{key:"setServerError",value:function(e){this.error=e}}]),e}();function yt(){yt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new k(a||[]);return r(i,"_invoke",{value:w(e,n,c)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var f={};function h(){}function m(){}function d(){}var p={};l(p,o,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&n.call(g,o)&&(p=g);var y=d.prototype=h.prototype=Object.create(p);function E(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t(function(a,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,i,c)},function(e){r("throw",e,i,c)}):t.resolve(f).then(function(e){u.value=e,i(u)},function(e){return r("throw",e,i,c)})}c(l.arg)}(r,o,a,i)})}return a=a?a.then(i,i):i()}})}function w(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return S()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function O(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var a=s(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,f;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=d,r(y,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:m,configurable:!0}),m.displayName=l(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},E(b.prototype),l(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new b(u(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},E(y),l(y,c,"Generator"),l(y,o,function(){return this}),l(y,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;x(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var Et=function(){function e(){var t=this;Object(f.a)(this,e),this.user=null,this.fbLoading=!1,this.refreshTokenTimeout=void 0,this.login=function(){var e=Object(s.a)(yt().mark(function e(n){var r;return yt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mt.account.login(n);case 3:r=e.sent,kt.commonStore.setToken(r.token),t.startRefreshTokenTimer(r),Object(m.i)(function(){return t.user=r}),it.navigate("/activities"),kt.modalStore.closeModal(),e.next=17;break;case 11:if(e.prev=11,e.t0=e.catch(0),400!==e.t0.response.status){e.next=15;break}throw e.t0;case 15:kt.modalStore.closeModal(),console.log(500);case 17:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t){return e.apply(this,arguments)}}(),this.register=function(){var e=Object(s.a)(yt().mark(function e(t){return yt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mt.account.register(t);case 3:it.navigate("/account/registerSuccess?email=".concat(t.email)),kt.modalStore.closeModal(),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),this.logout=function(){kt.commonStore.setToken(null),t.user=null,it.navigate("/")},this.getUser=Object(s.a)(yt().mark(function e(){var n;return yt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mt.account.current();case 3:n=e.sent,kt.commonStore.setToken(n.token),Object(m.i)(function(){return t.user=n}),t.startRefreshTokenTimer(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])})),this.setImage=function(e){t.user&&(t.user.image=e)},this.setDisplayName=function(e){t.user&&(t.user.displayName=e)},this.facebookLogin=function(){var e=Object(s.a)(yt().mark(function e(n){var r;return yt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.fbLoading=!0,e.next=4,mt.account.fbLogin(n);case 4:r=e.sent,kt.commonStore.setToken(r.token),t.startRefreshTokenTimer(r),Object(m.i)(function(){t.user=r,t.fbLoading=!1}),it.navigate("/activities"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),Object(m.i)(function(){return t.fbLoading=!1});case 15:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t){return e.apply(this,arguments)}}(),this.refreshToken=Object(s.a)(yt().mark(function e(){var n;return yt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopRefreshTokenTimer(),e.prev=1,e.next=4,mt.account.refreshToken();case 4:n=e.sent,Object(m.i)(function(){return t.user=n}),kt.commonStore.setToken(n.token),t.startRefreshTokenTimer(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])})),Object(m.e)(this)}return Object(h.a)(e,[{key:"startRefreshTokenTimer",value:function(e){var t=JSON.parse(atob(e.token.split(".")[1])),n=new Date(1e3*t.exp).getTime()-Date.now()-6e4;this.refreshTokenTimeout=setTimeout(this.refreshToken,n)}},{key:"stopRefreshTokenTimer",value:function(){clearTimeout(this.refreshTokenTimeout)}},{key:"isLoggedIn",get:function(){return!!this.user}}]),e}();function bt(){bt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new k(a||[]);return r(i,"_invoke",{value:w(e,n,c)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var f={};function h(){}function m(){}function d(){}var p={};l(p,o,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&n.call(g,o)&&(p=g);var y=d.prototype=h.prototype=Object.create(p);function E(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t(function(a,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,i,c)},function(e){r("throw",e,i,c)}):t.resolve(f).then(function(e){u.value=e,i(u)},function(e){return r("throw",e,i,c)})}c(l.arg)}(r,o,a,i)})}return a=a?a.then(i,i):i()}})}function w(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return S()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function O(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var a=s(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,f;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=d,r(y,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:m,configurable:!0}),m.displayName=l(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},E(b.prototype),l(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new b(u(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},E(y),l(y,c,"Generator"),l(y,o,function(){return this}),l(y,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;x(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var wt=function(){function e(){var t=this;Object(f.a)(this,e),this.profile=null,this.loadingProfile=!1,this.uploading=!1,this.loading=!1,this.followings=[],this.loadingFollowings=!1,this.activeTab=0,this.userActivities=[],this.loadingActivities=!1,this.setactiveTab=function(e){t.activeTab=e},this.loadProfile=function(){var e=Object(s.a)(bt().mark(function e(n){var r;return bt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingProfile=!0,e.prev=1,e.next=4,mt.profiles.get(n);case 4:r=e.sent,Object(m.i)(function(){t.profile=r,t.loadingProfile=!1}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),Object(m.i)(function(){return t.loadingProfile=!1});case 12:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),this.uploadPhoto=function(){var e=Object(s.a)(bt().mark(function e(n){var r,a;return bt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.uploading=!0,e.prev=1,e.next=4,mt.profiles.uploadPhoto(n);case 4:r=e.sent,a=r.data,Object(m.i)(function(){t.profile&&(t.profile.photos.push(a),a.isMain&&kt.userStore.user&&(kt.userStore.setImage(a.url),t.profile.image=a.url)),t.uploading=!1}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),Object(m.i)(function(){return t.uploading=!1});case 13:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}(),this.setMainPhoto=function(){var e=Object(s.a)(bt().mark(function e(n){return bt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,mt.profiles.setMainphoto(n.id);case 4:kt.userStore.setImage(n.url),Object(m.i)(function(){t.profile&&t.profile.photos&&(t.profile.photos.find(function(e){return e.isMain}).isMain=!1,t.profile.photos.find(function(e){return e.id===n.id}).isMain=!0,t.profile.image=n.url,t.loading=!1)}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),Object(m.i)(function(){return t.loading=!1});case 12:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),this.deletePhoto=function(){var e=Object(s.a)(bt().mark(function e(n){return bt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,mt.profiles.deletePhoto(n.id);case 4:Object(m.i)(function(){t.profile&&(t.profile.photos=t.profile.photos.filter(function(e){return e.id!==n.id}),t.loading=!1)}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),Object(m.i)(function(){return t.loading=!1});case 11:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),this.updateProfile=function(){var e=Object(s.a)(bt().mark(function e(n){return bt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,mt.profiles.updateProfile(n);case 4:Object(m.i)(function(){n.displayName&&n.displayName!==kt.userStore.user.displayName&&kt.userStore.setDisplayName(n.displayName),t.profile=Object(u.a)({},t.profile,n),t.loading=!1}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),Object(m.i)(function(){return t.loading=!1});case 11:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),this.updateFollowing=function(){var e=Object(s.a)(bt().mark(function e(n,r){return bt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,mt.profiles.updateFollowing(n);case 4:kt.activityStore.updateAttendeeFollowing(n),Object(m.i)(function(){t.profile&&t.profile.username!==kt.userStore.user.username&&t.profile.username===n&&(r?t.profile.followersCount++:t.profile.followersCount--,t.profile.following=!t.profile.following),t.profile&&t.profile.username===kt.userStore.user.username&&(r?t.profile.followingCount++:t.profile.followingCount--),t.followings.forEach(function(e){e.username===n&&(e.following?e.followersCount--:e.followersCount++,e.following=!e.following)}),t.loading=!1}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),Object(m.i)(function(){return t.loading=!1});case 12:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t,n){return e.apply(this,arguments)}}(),this.loadFollowings=function(){var e=Object(s.a)(bt().mark(function e(n){var r;return bt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingFollowings=!0,e.prev=1,e.next=4,mt.profiles.listFollowings(t.profile.username,n);case 4:r=e.sent,Object(m.i)(function(){t.followings=r,t.loadingFollowings=!1}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),Object(m.i)(function(){return t.loadingFollowings=!1});case 12:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),this.loadUserActivities=function(){var e=Object(s.a)(bt().mark(function e(n,r){var a;return bt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingActivities=!0,e.prev=1,e.next=4,mt.profiles.listActivities(n,r);case 4:a=e.sent,Object(m.i)(function(){t.userActivities=a,t.loadingActivities=!1}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),Object(m.i)(function(){return t.loadingActivities=!1});case 12:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t,n){return e.apply(this,arguments)}}(),Object(m.e)(this),Object(m.h)(function(){return t.activeTab},function(e){if(3===e||4===e){var n=3===e?"followers":"following";t.loadFollowings(n)}else t.followings=[]})}return Object(h.a)(e,[{key:"isCurrentUser",get:function(){if(kt.userStore.user&&this.profile)return kt.userStore.user.username===this.profile.username}}]),e}(),Ot=n(360),jt=n(8);function xt(){xt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),c=new k(a||[]);return r(i,"_invoke",{value:w(e,n,c)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var f={};function h(){}function m(){}function d(){}var p={};l(p,o,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&n.call(g,o)&&(p=g);var y=d.prototype=h.prototype=Object.create(p);function E(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t(function(a,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,i,c)},function(e){r("throw",e,i,c)}):t.resolve(f).then(function(e){u.value=e,i(u)},function(e){return r("throw",e,i,c)})}c(l.arg)}(r,o,a,i)})}return a=a?a.then(i,i):i()}})}function w(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return S()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function O(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var a=s(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,f;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=d,r(y,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:m,configurable:!0}),m.displayName=l(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},E(b.prototype),l(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new b(u(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},E(y),l(y,c,"Generator"),l(y,o,function(){return this}),l(y,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;x(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var kt={activityStore:new vt,commonStore:new gt,userStore:new Et,modalStore:new function e(){var t=this;Object(f.a)(this,e),this.modal={open:!1,body:null},this.openModal=function(e){t.modal.open=!0,t.modal.body=e},this.closeModal=function(){t.modal.open=!1,t.modal.body=null},Object(m.e)(this)},profileStore:new wt,commentStore:new function e(){var t=this;Object(f.a)(this,e),this.comments=[],this.hubConnection=null,this.createHubConnection=function(e){kt.activityStore.selectedActivity&&(t.hubConnection=(new Ot.a).withUrl("/chat?activityId="+e,{accessTokenFactory:function(){return kt.userStore.user.token}}).withAutomaticReconnect().configureLogging(jt.a.Information).build(),t.hubConnection.start().catch(function(e){return console.log("Error establishing connection.")}),t.hubConnection.on("LoadComments",function(e){Object(m.i)(function(){e.forEach(function(e){e.createAt=new Date(e.createAt)}),t.comments=e})}),t.hubConnection.on("ReceiveComment",function(e){Object(m.i)(function(){e.createAt=new Date(e.createAt),t.comments.unshift(e)})}))},this.stopHubConnection=function(){t.hubConnection.stop().catch(function(e){return console.log("Error stopping connection.")})},this.clearComments=function(){t.comments=[],t.stopHubConnection()},this.addComment=function(){var e=Object(s.a)(xt().mark(function e(n){return xt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.activityId=kt.activityStore.selectedActivity.id,e.prev=1,e.next=4,t.hubConnection.invoke("SendComment",n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t){return e.apply(this,arguments)}}(),Object(m.e)(this)}},Lt=Object(r.createContext)(kt);function St(){return Object(r.useContext)(Lt)}i.a.createRoot(document.getElementById("root")).render(a.a.createElement(Lt.Provider,{value:kt},a.a.createElement(y.d,{router:it}))),c()}},[[260,1,2]]]);
//# sourceMappingURL=main.169adce5.chunk.js.map